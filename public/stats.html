<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistiques — FondsPilot</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background-color: #f9f9f9;
            color: #333;
        }
        header {
            background-color: #6a5acd;
            color: white;
            padding: 20px;
            text-align: center;
        }
        header h1 {
            margin: 0;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin-left: 15px;
        }
        main {
            padding: 20px;
            max-width: 1200px;
            margin: auto;
        }
        .cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        .card {
            flex: 1 1 200px;
            background-color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        canvas {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        @media (max-width: 768px) {
            .cards {
                flex-direction: column;
            }
        }
        .btn-export {
            display: inline-block;
            padding: 10px 20px;
            background-color: #6a5acd;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<header>
    <h1>Statistiques</h1>
    <nav>
        <a href="index.html">← Retour</a>
    </nav>
</header>

<main>
    <!-- Chiffres clés -->
    <div class="cards">
        <div class="card">
            <h2 id="totalDepenses">0 CFA</h2>
            <p>Total Dépenses</p>
        </div>
        <div class="card">
            <h2 id="totalEpargne">0 CFA</h2>
            <p>Total Épargné</p>
        </div>
        <div class="card">
            <h2 id="depensesCategorie">0 CFA</h2>
            <p>Dépenses par catégorie</p>
        </div>
    </div>

    <!-- Graphiques -->
    <h2>Répartition des dépenses</h2>
    <canvas id="pieChart" width="400" height="200"></canvas>

    <h2>Dépenses et Épargne sur le mois</h2>
    <canvas id="lineChart" width="400" height="200"></canvas>

    <button class="btn-export" onclick="exportCharts()">Exporter PDF</button>
</main>

<script>
    // Exemple de données dynamiques (à remplacer par localStorage ou Firebase)
    const depenses = {
        logement: 150000,
        alimentation: 70000,
        loisirs: 30000,
        transport: 50000
    };
    const epargne = 70000;

    // Affichage des chiffres clés
    document.getElementById('totalDepenses').innerText = Object.values(depenses).reduce((a,b)=>a+b,0) + ' CFA';
    document.getElementById('totalEpargne').innerText = epargne + ' CFA';
    document.getElementById('depensesCategorie').innerText = Math.max(...Object.values(depenses)) + ' CFA';

    // Graphique en camembert
    const pieCtx = document.getElementById('pieChart').getContext('2d');
    new Chart(pieCtx, {
        type: 'pie',
        data: {
            labels: Object.keys(depenses),
            datasets: [{
                data: Object.values(depenses),
                backgroundColor: ['#6a5acd','#8a2be2','#9370db','#b19cd9']
            }]
        },
        options: {
            responsive: true
        }
    });

    // Graphique en ligne
    const lineCtx = document.getElementById('lineChart').getContext('2d');
    new Chart(lineCtx, {
        type: 'line',
        data: {
            labels: ['Semaine 1','Semaine 2','Semaine 3','Semaine 4'],
            datasets: [
                {
                    label: 'Dépenses',
                    data: [40000, 50000, 60000, 70000],
                    borderColor: '#ff6347',
                    backgroundColor: 'rgba(255,99,71,0.2)',
                    fill: true,
                    tension: 0.3
                },
                {
                    label: 'Épargne',
                    data: [10000, 20000, 5000, 70000],
                    borderColor: '#6a5acd',
                    backgroundColor: 'rgba(106,90,205,0.2)',
                    fill: true,
                    tension: 0.3
                }
            ]
        },
        options: {
            responsive: true
        }
    });

    // Fonction d'export (placeholder)
    function exportCharts() {
        alert('Fonction d\'export à implémenter');
    }
</script>

</body>
</html>
